<script language="JavaScript">
	function edit_popup(controller,id) {
		new Ajax.Updater('edit_box', '/'+controller+'/edit_dynamic/'+id+'?internal=edit_box&public=yes', {asynchronous:true, evalScripts:true, onLoading:function(request){new Effect.Appear("edit_box");}}); 
	}
	function search_popup(controller,relatedtype,id) {
		new Ajax.Updater('edit_box', '/'+controller+'/edit_search/'+id+'?internal=edit_box&public=yes&level=0&relatedtype='+relatedtype, {asynchronous:true, evalScripts:true, onLoading:function(request){new Effect.Appear("edit_box");}}); 
	}
	function test() {
		alert('test');
	}

	var i = <%= build_menu('definitions',@definition.id) %>
	var menu1 = new menu (i, MENU_POS);
</script>
<div id="edit_box" style="display:none;
		position:absolute;
		top:20%;
    left:15%;
    z-index:9999;
    width:600px;
    height:400px;
		overflow:auto;
		padding: 10px;
		background-color: #FFFFFF;
		border: solid #0000FF;
		<!-- border:1 solid rgb(0,0,0); -->
		">
		
</div>
<div class="tib1">
	<b><font size="+1"><%= @definition.term %></font></b><br><br>
	<div id="<%= @definition.id %>">
		<%= render(:partial => 'definition', :locals => {:d => @definition})%>
	</div>
		<!-- <span id=definition[grammatical_function]_value class=menuvalue onclick=show_menu(menu1,getCoord(arguments[0]));><%= image_tag 'edit_up.gif', :alt => 'Edit' %> </span> -->
<br>
<ul>
<% number = 1
	letters = ['a','b','c','d','e','f','g']
	for sd in @definition.super_definitions 
%>
	<% if sd.sub_definition != nil %>
		<script>
			var i<%= sd.sub_definition.id %> = <%= build_menu('definitions',sd.sub_definition.id) %>
			var menu<%= sd.sub_definition.id %> = new menu (i<%= sd.sub_definition.id %>, MENU_POS);
		</script>

		<li><b><%= number %>: </b>
		<%= render(:partial => 'definition', :locals => {:d => sd.sub_definition} )%>
		<!-- <span id=definition[grammatical_function]_value class=menuvalue onclick=show_menu(menu<%= sd.sub_definition.id %>,getCoord(arguments[0]));><%= image_tag 'edit_up.gif', :alt => 'Edit' %> </span> -->

			<ul>
		<% if sd.sub_definition != nil %>
			<% subdef = 0 
				for ssd in sd.sub_definition.super_definitions
			%>
				<script>
					var i<%= sd.sub_definition.id %> = <%= build_menu('definitions',sd.sub_definition.id) %>
					var menu<%= sd.sub_definition.id %> = new menu (i<%= sd.sub_definition.id %>, MENU_POS);
				</script>
				<li><b><%= letters[subdef] %><% subdef = subdef + 1 %>: </b>
					<%= render(:partial => 'definition', :locals => {:d => ssd.sub_definition} )%>
					<!-- <span id=definition[grammatical_function]_value class=menuvalue onclick=show_menu(menu<%= sd.sub_definition.id %>,getCoord(arguments[0]));><%= image_tag 'edit_up.gif', :alt => 'Edit' %> </span> -->
				<% end %>
				<ul>
				<% if ssd != nil %>
					<% if ssd.sub_definition != nil %>
						<% subsubdef = 1
						for sssd in ssd.sub_definition.super_definitions
					%>
					<script>
						var i<%= sd.sub_definition.id %> = <%= build_menu('definitions',sd.sub_definition.id) %>
						var menu<%= sd.sub_definition.id %> = new menu (i<%= sd.sub_definition.id %>, MENU_POS);
					</script>
					<li><b>(<%= subsubdef %>): </b>
					<%= render(:partial => 'definition', :locals => {:d => sssd.sub_definition} )%>
					<!-- <span id=definition[grammatical_function]_value class=menuvalue onclick=show_menu(menu<%= sd.sub_definition.id %>,getCoord(arguments[0]));><%= image_tag 'edit_up.gif', :alt => 'Edit' %> </span> -->
				<% end %>
			<% end %>
		<% end %>
			</ul>

			<% subdef += 1 %>
		<% end %>
		</ul>
		
		<br/>
	<% end %>
	<% number += 1 %>
<% end %>
</ul>
<br>

</div>